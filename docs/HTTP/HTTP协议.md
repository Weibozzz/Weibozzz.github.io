# HTTP协议
## 特点

1. 简单快速 ：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有`GET`、`HEAD`、`POST`。每种方法规定了客户与服务器联系的类型不同。由于`HTTP`协议简单，使得`HTTP`服务器的程序规模小，因而通信速度很快。
2. 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记
3. 连接： 无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
4. 无状态：`HTTP`协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

## 报文

- 请求报文：请求行，请求头，空行，请求体
- 响应报文：状态行，响应头，空行，响应体

## 请求方法

1. `GET`     请求指定的页面信息，并返回实体主体。
2. `HEAD`     类似于`get`请求，只不过返回的响应中没有具体的内容，用于获取报头
3. `POST`     向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。`POST`请求可能会导致新的资源的建立和/或已有资源的修改。
4. `PUT`     从客户端向服务器传送的数据取代指定的文档的内容。
5. `DELETE`      请求服务器删除指定的页面。
6. `CONNECT`     `HTTP/1.1`协议中预留给能够将连接改为管道方式的代理服务器。
7. `OPTIONS`     允许客户端查看服务器的性能。
8. `TRACE`     回显服务器收到的请求，主要用于测试或诊断。

### get和post的区别

1. `get`在浏览器回退时是无害的，`post`会再次提交请求
2. `get`的url可以收藏，`post`不可以
3. `get`请求会主动缓存，`post`不会，除非手动设置

### 状态码

- 1xx：指示信息--表示请求已接收，继续处理
- 2xx：成功--表示请求已被成功接收、理解、接受
- 3xx：重定向--要完成请求必须进行更进一步的操作
- 4xx：客户端错误--请求有语法错误或请求无法实现
- 5xx：服务器端错误--服务器未能实现合法的请求

[more](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/206)

## 持久连接

什么是持久连接？对于`HTTP`协议而言，它是基于请求响应模型，`Client`向`Server`发请求时，先建立一条`HTTP`连接，`Server`给`Client`响应数据后，连接关闭。

当`Client`发送下一个请求时，需要重新再建立`HTTP`连接，这种方式就是：一个请求响应需要占用一条HTTP连接。而持久连接就是：只需要建立一条连接，然后在这条连接上 传输多个请求和响应。

与持久连接相关的字段
`HTTP1.0`中有一个`Connection`首部字段，它是一个逐跳首部字段。`Connection:Keep-Alive`，表示希望将此条连接作为持久连接。
`HTTP1.1`中，建立的`HTTP`请求默认是持久连接的。当`Client`确定不再需要向`Server`发送数据时，它可以关闭连接，即在发送首部中添加`Connection:Closed`字段。

## 管线化

- ①管线化机制通过持久连接完成，仅`HTTP/1.1`支持此技术
- ②只有`GET`和`HEAD`请求可以进行管线化，而`POST`会有所限制
- ③初次创建连接时不应启动管线机制，因为对方服务器不一定支持`HTTP/1.1`版本的协议

持久连接的时候，某个连接消息传递类似于
持久连接的一个最大的好处是：大大减少了连接的建立以及关闭时延。
“缺点”，请求响应是顺序执行的。只有在请求1的响应收到之后，才会发送请求2，这就是持久连接与管道化连接不同的地方。
`请求1=>响应1=>请求2=>响应2`

管线化后
`请求1=>请求2=>响应1=>响应2`

管道化连接是需要持久连接支持的。管道化连接是在持久连接的基础上，以“流水线”的方式发送请求：不需要等到请求1的响应到达`Client`，就可以发送请求2....

## 今日图 520扎心了
![123_20190521095200.jpg](../../images/123_20190521095200.jpg)
