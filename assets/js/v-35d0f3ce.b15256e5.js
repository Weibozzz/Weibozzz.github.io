(self.webpackChunkweiboqianduan=self.webpackChunkweiboqianduan||[]).push([[1076],{3490:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>e});const e={key:"v-35d0f3ce",path:"/Utils/chrome%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91.html",title:"chrome插件开发",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"文件结构",slug:"文件结构",children:[{level:3,title:"manifest.json",slug:"manifest-json",children:[]}]},{level:2,title:"开发安装调试",slug:"开发安装调试",children:[{level:3,title:"本地安装",slug:"本地安装",children:[]},{level:3,title:"调试后台脚本 background.js",slug:"调试后台脚本-background-js",children:[]},{level:3,title:"用户页面 popup.html",slug:"用户页面-popup-html",children:[]}]},{level:2,title:"Api",slug:"api",children:[]},{level:2,title:"注意",slug:"注意",children:[]}],filePathRelative:"Utils/chrome插件开发.md",git:{updatedTime:1631007363e3}}},3140:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>B});var e=a(6252);const l=a.p+"assets/img/chrome-plugin-show.1b5b725b.png",m=a.p+"assets/img/chrome-bgjs.9ef56ba6.png",t=(0,e.Wm)("h1",{id:"chrome插件开发",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#chrome插件开发","aria-hidden":"true"},"#"),(0,e.Uk)(" chrome插件开发")],-1),r=(0,e.Wm)("blockquote",null,[(0,e.Wm)("p",null,"文章暂时不完整，可能存在错误，待补充")],-1),p=(0,e.Wm)("h2",{id:"文件结构",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#文件结构","aria-hidden":"true"},"#"),(0,e.Uk)(" 文件结构")],-1),o=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:l,alt:"chrome-plugin-show.png"})],-1),c=(0,e.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-text"},[(0,e.Wm)("code",null,"chrome-plugin-demo\n├── background.js\n├── images\n│   ├── 128.png\n│   ├── 16.png\n│   ├── 32.png\n│   └── 48.png\n├── manifest.json\n├── popup.html\n└── popup.js\n\n")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"4"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"5"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"6"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"7"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"8"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"9"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"10"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"11"),(0,e.Wm)("br")])],-1),i=(0,e.Wm)("h3",{id:"manifest-json",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#manifest-json","aria-hidden":"true"},"#"),(0,e.Uk)(" manifest.json")],-1),W=(0,e.Wm)("div",{class:"language-json ext-json line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-json"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token property"},'"name"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"提醒"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token property"},'"version"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"1.0.0"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token property"},'"description"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"单次提醒-重复提醒"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token property"},'"manifest_version"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token number"},"2"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token property"},'"permissions"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token string"},'"notifications"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token string"},'"alarms"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token string"},'"storage"'),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token punctuation"},"]"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token property"},'"background"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token property"},'"scripts"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n      "),(0,e.Wm)("span",{class:"token string"},'"background.js"'),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token punctuation"},"]"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token property"},'"persistent"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token boolean"},"false"),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token property"},'"browser_action"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token property"},'"default_icon"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e.Wm)("span",{class:"token property"},'"16"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"images/get_started16.png"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e.Wm)("span",{class:"token property"},'"32"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"images/get_started32.png"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e.Wm)("span",{class:"token property"},'"48"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"images/get_started48.png"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e.Wm)("span",{class:"token property"},'"128"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"images/get_started128.png"'),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token property"},'"default_title"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"消息提醒插件"'),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token property"},'"default_popup"'),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},'"popup.html"'),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"4"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"5"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"6"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"7"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"8"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"9"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"10"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"11"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"12"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"13"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"14"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"15"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"16"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"17"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"18"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"19"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"20"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"21"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"22"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"23"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"24"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"25"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"26"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"27"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"28"),(0,e.Wm)("br")])],-1),u=(0,e.Wm)("h2",{id:"开发安装调试",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#开发安装调试","aria-hidden":"true"},"#"),(0,e.Uk)(" 开发安装调试")],-1),k=(0,e.Wm)("h3",{id:"本地安装",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#本地安装","aria-hidden":"true"},"#"),(0,e.Uk)(" 本地安装")],-1),b=(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Uk)("在 "),(0,e.Wm)("code",null,"chrome"),(0,e.Uk)(" 中安装扩展 谷歌浏览器右上角: 更多按钮 -> 更多工具 -> 扩展程序")]),(0,e.Wm)("li",null,"点击加载已解压的扩展程序，选择刚创建的文件夹"),(0,e.Wm)("li",null,"点开谷歌浏览器右上角的拼图图标即可看到你的插件。")],-1),d=(0,e.Wm)("h3",{id:"调试后台脚本-background-js",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#调试后台脚本-background-js","aria-hidden":"true"},"#"),(0,e.Uk)(" 调试后台脚本 background.js")],-1),h=(0,e.Wm)("blockquote",null,[(0,e.Wm)("p",null,"后台脚本是扩展程序的事件处理程序，其中包含扩展程序的事件监听器，可以在后台运行，只在需要时才加载，在空闲时不加载。")],-1),g=(0,e.Wm)("p",null,"特点：",-1),U=(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,"Javascript 文件总是运行在后台."),(0,e.Wm)("li",null,"有 Chrome 应用程序级别命令的访问权限。"),(0,e.Wm)("li",null,"有使用所有 Chrome API 的权限")],-1),f=(0,e.Wm)("p",null,"调试:",-1),j=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:m,alt:"chrome-bgjs.png"})],-1),y=(0,e.Wm)("h3",{id:"用户页面-popup-html",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#用户页面-popup-html","aria-hidden":"true"},"#"),(0,e.Uk)(" 用户页面 popup.html")],-1),v=(0,e.Wm)("p",null,"调试：",-1),x=(0,e.Wm)("p",null,"找到本地安装的插件，右键点击审查弹出内容即可。",-1),_=(0,e.Wm)("h2",{id:"api",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#api","aria-hidden":"true"},"#"),(0,e.Uk)(" Api")],-1),w=(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,"chrome.extension.getBackgroundPage() 返回 background.js 的变量,是 popup.js 获取背景页的桥梁"),(0,e.Wm)("li",null,[(0,e.Uk)("chrome.storage.sync.onChanged.addListener 监听本地缓存变化 "),(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,"chrome.storage.sync.clear"),(0,e.Wm)("li",null,"chrome.storage.sync.set"),(0,e.Wm)("li",null,"chrome.storage.sync.get")])]),(0,e.Wm)("li",null,[(0,e.Uk)("chrome.alarms.getAll 获取提醒的 api "),(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,"clear"),(0,e.Wm)("li",null,"clearAll"),(0,e.Wm)("li",null,"create")])]),(0,e.Wm)("li",null,"chrome.alarms.onAlarm.addListener 监听 alarm 变化"),(0,e.Wm)("li",null,"chrome.notifications.create 提醒"),(0,e.Wm)("li",null,"chrome.runtime.onInstalled.addListener 加载插件初始化监听")],-1),C=(0,e.Wm)("h2",{id:"注意",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#注意","aria-hidden":"true"},"#"),(0,e.Uk)(" 注意")],-1),A=(0,e.Wm)("p",null,[(0,e.Wm)("code",null,"popup.html"),(0,e.Uk)(" 的 "),(0,e.Wm)("code",null,"js"),(0,e.Uk)(" 需要外部引入。")],-1),B={render:function(n,s){return(0,e.wg)(),(0,e.j4)(e.HY,null,[t,r,p,o,c,i,W,u,k,b,d,h,g,U,f,j,y,v,x,_,w,C,A],64)}}}}]);